{"ts":1348089021872,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*\n * hsv <-> rbg conversion code adapted from \n * http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript\n */\n \nvar rgbToHsv = function(r, g, b){\n    r = r/255, g = g/255, b = b/255;\n    var max = Math.max(r, g, b), min = Math.min(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min){\n        h = 0; // achromatic\n    }else{\n        switch(max){\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n\n    h = Math.round(h*360);\n    s = Math.round(s*100);\n    v = Math.round(v*100);\n    return [h, s, v];\n};\nexports.rgbToHsv = rgbToHsv;\n\nvar hsvToRgb = function(h, s, v){\n    h = h/360;\n    v = v/100;\n    s = s/100;\n    var r, g, b;\n\n    var i = Math.floor(h * 6);\n    var f = h * 6 - i;\n    var p = v * (1 - s);\n    var q = v * (1 - f * s);\n    var t = v * (1 - (1 - f) * s);\n\n    switch(i % 6){\n        case 0: r = v, g = t, b = p; break;\n        case 1: r = q, g = v, b = p; break;\n        case 2: r = p, g = v, b = t; break;\n        case 3: r = p, g = q, b = v; break;\n        case 4: r = t, g = p, b = v; break;\n        case 5: r = v, g = p, b = q; break;\n    }\n\n    r = Math.round(r*255);\n    g = Math.round(g*255);\n    b = Math.round(b*255);\n    return [r, g, b];\n};\nexports.hsvToRgb = hsvToRgb;\n\n/*\nTheme class\n*/\nvar Theme = {\n    mainColor : [\n                    '#ffffff',  //default white / no theme\n                    '#00a4b3',  //blue\n                    '#bf7900',  //orange\n                    '#7800B3',  //violet\n                    '#69B300'   //green\n                ],\n    minHue : [\n                0,\n                175,\n                28,\n                270,\n                75\n             ],\n    maxHue : [\n                0,\n                195, \n                48, \n                290, \n                95\n             ],\n    getColor : function(theme){\n        if(theme < 0 || theme >4){\n            return null;\n        } else if (theme === 0){\n            return '#ffffff';\n        }\n        var h = this.minHue[theme] + Math.round(Math.random()*20);\n        var s = 100;\n        var v = 70;\n        \n        var rgb = hsvToRgb(h,s,v);\n        var str = '#';\n        for(var i in rgb){\n            var temp = rgb[i].toString(16);\n            if(temp.length == 1){\n                temp = '0'+temp;\n            }\n            str+=temp;\n        }\n        return str;\n    }\n};\nexports.Theme = Theme;\nexports.theme = Theme;\n\n"]],"start1":0,"start2":0,"length1":0,"length2":2601}]],"length":2601}
{"contributors":[],"silentsave":false,"ts":1350246328810,"patch":[[{"diffs":[[0,"ted from"],[-1," "],[0,""],[1,""],[0,"\n * http"]],"start1":38,"start2":38,"length1":17,"length2":16},{"diffs":[[0,"ipt\n */\n"],[-1," "],[0,""],[1,""],[0,"\nvar rgb"]],"start1":150,"start2":150,"length1":17,"length2":16},{"diffs":[[0," g, b){\n"],[-1,"  "],[0,"  r = r/"]],"start1":185,"start2":185,"length1":18,"length2":16},{"diffs":[[0," b/255;\n"],[-1,"  "],[0,"  var ma"]],"start1":220,"start2":220,"length1":18,"length2":16},{"diffs":[[0," g, b);\n"],[-1,"  "],[0,"  var h,"]],"start1":276,"start2":276,"length1":18,"length2":16},{"diffs":[[0,"= max;\n\n"],[-1,"  "],[0,"  var d "]],"start1":298,"start2":298,"length1":18,"length2":16},{"diffs":[[0," - min;\n"],[-1,"  "],[0,"  s = ma"]],"start1":319,"start2":319,"length1":18,"length2":16},{"diffs":[[0,"max;\n\n  "],[-1," "],[-1," "],[0,"if(max ="]],"start1":353,"start2":353,"length1":18,"length2":16},{"diffs":[[0,"= min){\n"],[-1,"    "],[0,"    h = "]],"start1":369,"start2":369,"length1":20,"length2":16},{"diffs":[[0,"romatic\n"],[-1,"  "],[0,"  }else{"]],"start1":394,"start2":394,"length1":18,"length2":16},{"diffs":[[0,"se{\n    "],[-1,"   "],[-1," "],[0,"switch(m"]],"start1":407,"start2":407,"length1":20,"length2":16},{"diffs":[[0,"h(max){\n"],[-1,"      "],[0,"      ca"]],"start1":420,"start2":420,"length1":22,"length2":16},{"diffs":[[0,"reak;\n      "],[-1,"   "],[-1,"   "],[0,"case g: h = "]],"start1":478,"start2":478,"length1":30,"length2":24},{"diffs":[[0,";\n      "],[-1,"  "],[-1,"    "],[0,"case b: "]],"start1":524,"start2":524,"length1":22,"length2":16},{"diffs":[[0,"reak;\n      "],[-1," "],[-1," "],[0,"}\n"],[-1,"    "],[0,"    h /= 6;\n"]],"start1":562,"start2":562,"length1":32,"length2":26},{"diffs":[[0,"/= 6;\n  "],[-1," "],[-1," "],[0,"}\n\n"],[-1,"  "],[0,"  h = Ma"]],"start1":582,"start2":582,"length1":23,"length2":19},{"diffs":[[0,"h*360);\n"],[-1,"  "],[0,"  s = Ma"]],"start1":610,"start2":610,"length1":18,"length2":16},{"diffs":[[0,"s*100);\n"],[-1,"  "],[0,"  v = Ma"]],"start1":635,"start2":635,"length1":18,"length2":16},{"diffs":[[0,"v*100);\n"],[-1,"  "],[0,"  return"]],"start1":660,"start2":660,"length1":18,"length2":16},{"diffs":[[0," s, v){\n"],[-1,"  "],[0,"  h = h/"]],"start1":747,"start2":747,"length1":18,"length2":16},{"diffs":[[0,"/360;\n  "],[-1," "],[-1," "],[0,"v = v/10"]],"start1":762,"start2":762,"length1":18,"length2":16},{"diffs":[[0," v/100;\n"],[-1,"  "],[0,"  s = s/"]],"start1":773,"start2":773,"length1":18,"length2":16},{"diffs":[[0," s/100;\n"],[-1,"  "],[0,"  var r,"]],"start1":786,"start2":786,"length1":18,"length2":16},{"diffs":[[0," g, b;\n\n"],[-1,"  "],[0,"  var i "]],"start1":802,"start2":802,"length1":18,"length2":16},{"diffs":[[0,"r(h * 6);\n  "],[-1," "],[-1," "],[0,"var f = h * "]],"start1":829,"start2":829,"length1":26,"length2":24},{"diffs":[[0," 6 - i;\n"],[-1,"  "],[0,"  var p "]],"start1":852,"start2":852,"length1":18,"length2":16},{"diffs":[[0," * (1 - s);\n"],[-1,"  "],[0,"  var q = v "]],"start1":871,"start2":871,"length1":26,"length2":24},{"diffs":[[0,"f * s);\n"],[-1,"  "],[0,"  var t "]],"start1":902,"start2":902,"length1":18,"length2":16},{"diffs":[[0," * s);\n\n"],[-1,"  "],[0,"  switch"]],"start1":936,"start2":936,"length1":18,"length2":16},{"diffs":[[0,"i % 6){\n    "],[-1," "],[-1,"   "],[0,"case 0: r = "]],"start1":953,"start2":953,"length1":28,"length2":24},{"diffs":[[0," break;\n    "],[-1,"  "],[-1,"  "],[0,"case 1: r = "]],"start1":993,"start2":993,"length1":28,"length2":24},{"diffs":[[0,", b = p; break;\n"],[-1,"    "],[0,"    case 2: r = "]],"start1":1025,"start2":1025,"length1":36,"length2":32},{"diffs":[[0,", b = t; break;\n"],[-1,"    "],[0,"    case 3: r = "]],"start1":1065,"start2":1065,"length1":36,"length2":32},{"diffs":[[0," break;\n    "],[-1," "],[-1,"   "],[0,"case 4: r = "]],"start1":1113,"start2":1113,"length1":28,"length2":24},{"diffs":[[0,"ak;\n    "],[-1,"  "],[-1,"  "],[0,"case 5: "]],"start1":1157,"start2":1157,"length1":20,"length2":16},{"diffs":[[0,"ak;\n"],[-1,"  "],[0,"  }\n\n  "],[-1," "],[-1," "],[0,"r = "]],"start1":1197,"start2":1197,"length1":19,"length2":15},{"diffs":[[0,"r*255);\n"],[-1,"  "],[0,"  g = Ma"]],"start1":1223,"start2":1223,"length1":18,"length2":16},{"diffs":[[0,"g*255);\n"],[-1,"  "],[0,"  b = Ma"]],"start1":1248,"start2":1248,"length1":18,"length2":16},{"diffs":[[0,"b*255);\n"],[-1,"  "],[0,"  return"]],"start1":1273,"start2":1273,"length1":18,"length2":16},{"diffs":[[0,"b;\n\n"],[-1,"/*\nTheme class\n*/\nvar Theme = {\n    mainColor : [\n                    '#ffffff',  //default white / no theme\n                    '#00a4b3',  //blue\n                    '#bf7900',  //orange\n                    '#7800B3',  //violet\n                    '#69B300'   //green\n                ],\n    minHue : [\n                0,\n                175,\n                28,\n                270,\n                75\n             ],\n    maxHue : [\n                0,\n                195, \n                48, \n                290, \n                95\n             ],\n    "],[1,"var colors = function() {\n  this.s = 90;\n  this.v = 70;\n  this.hues = [];\n};\n\n/*\nReturns an unused color as distinct as possible from colors already being used\nin the format [h,s,v]\n*/\ncolors.prototype."],[0,"getC"]],"start1":1330,"start2":1330,"length1":566,"length2":210},{"diffs":[[0,"etColor "],[-1,":"],[1,"="],[0," functio"]],"start1":1537,"start2":1537,"length1":17,"length2":17},{"diffs":[[0,"ion("],[-1,"theme){\n      "],[1,"id) {\n"],[0,"  if"],[1," "],[0,"(th"],[-1,"eme < 0 || theme >4){\n            return null;\n        } else if (theme"],[1,"is.hues.length()"],[0," === 0)"],[1," "],[0,"{\n    "],[-1,"        return '#ffffff';\n        }\n        var h = this.minHue[theme] + Math.round(Math.random()*20);\n        var s = 100;\n        var v = 70;\n        \n        var rgb = hsvToRgb(h,s,v);\n        var str = '#';\n        for(var i in rgb){\n            var temp = rgb[i].toString(16);\n            if(temp.length == 1){\n                temp = '0'+temp;\n            }\n            str+=temp;\n        }\n        return str;\n    }\n};\nexports.Theme = Theme;\nexports.theme = Theme;\n\n"],[1,"this.hues.push({'id': id, 'h':0});\n    this.hues.push({'id': id, 'h':360}); // dummy entry\n    return [0, this.s, this.v]\n  } else {\n\n  }\n}\n\nexports.colors = colors;"]],"start1":1552,"start2":1552,"length1":581,"length2":213}]],"length":1765,"saved":false}
{"contributors":[],"silentsave":false,"ts":1350246806323,"patch":[[{"diffs":[[0," else {\n"],[-1,"\n  }"],[1,"    // TODO(this part)\n  }\n}\n\n/*\nFrees up hues associated with the given user id\n*/\ncolor.prototype.remove = function(id) {\n"],[0,"\n}\n\nexpo"]],"start1":1725,"start2":1725,"length1":20,"length2":140}]],"length":1885,"saved":false}
{"ts":1350246849143,"patch":[[{"diffs":[[0,"TODO"],[-1,"(this part)"],[1,": find best hue\n    return [0,0,0]"],[0,"\n  }"]],"start1":1740,"start2":1740,"length1":19,"length2":42},{"diffs":[[0,"*/\ncolor"],[1,"s"],[0,".prototy"]],"start1":1837,"start2":1837,"length1":16,"length2":17},{"diffs":[[0,"n(id) {\n"],[1,"  // TODO: everything"],[0,"\n}\n\nexpo"]],"start1":1873,"start2":1873,"length1":16,"length2":37}]],"length":1930,"saved":false}
{"contributors":[],"silentsave":false,"ts":1350251019821,"patch":[[{"diffs":[[0,"his."],[1,"hue"],[0,"s = "],[-1,"90;\n  this.v = 70;\n  this.hues = []"],[1,"[{'id': 'dummy', 'h': 360}];\n  this.assigned0 = false"],[0,";\n};"]],"start1":1363,"start2":1363,"length1":47,"length2":68},{"diffs":[[0," unused "],[-1,"color"],[1,"hue"],[0," as dist"]],"start1":1446,"start2":1446,"length1":21,"length2":19},{"diffs":[[0,"sed\n"],[-1,"in the format [h,s,v]\n"],[0,"*/\nc"]],"start1":1509,"start2":1509,"length1":30,"length2":8},{"diffs":[[0,"if ("],[1,"!"],[0,"this."],[-1,"hues.length() === "],[1,"assigned"],[0,"0) {"]],"start1":1561,"start2":1561,"length1":31,"length2":22},{"diffs":[[0,"{\n    this.hues."],[-1,"push"],[1,"unshift"],[0,"({'id': id, 'h':"]],"start1":1582,"start2":1582,"length1":36,"length2":39},{"diffs":[[0,"id, 'h':"],[1," "],[0,"0});\n   "]],"start1":1613,"start2":1613,"length1":16,"length2":17},{"diffs":[[0,"his."],[-1,"hues.push({'id': id, 'h':360}); // dummy entry\n    return [0, this.s, this.v]\n  } else {\n    // TODO: find best hue\n    return [0,0,0]"],[1,"assigned0 = true;\n    return 0;\n  } else {\n    var lowerPos = -1;\n    var upperPos = -1;\n    var longestRange = 0;\n    for (var i in this.hues) {\n      if (this.hues[i+1] !== undefined) {\n        var range = this.hues[i+1].h - this.hues[i].h;\n        if (range > longestRange) {\n          longestRange = range;\n          lowerPos = i;\n          upperPos = i + 1;\n        }\n      }\n    }\n    if (this.hues[lowerPos] !== undefined &&\n        this.hues[upperPos] !== undefined) {\n      var h = Math.round((this.hues[lowerPos].h + this.hues[upperPos].h) / 2);\n      this.hues.splice(lowerPos + 1,0,{'id': id, 'h': h});\n      return h\n    }\n    return undefined;"],[0,"\n  }\n}"],[-1,""],[0,""],[1,";"],[0,"\n\n/*"]],"start1":1632,"start2":1632,"length1":148,"length2":672},{"diffs":[[0,"{\n  "],[-1,"// TODO: everything\n}"],[1,"for (var i in this.hues) {\n    if (this.hues[i].id == id) {\n      if (this.hues[i].h === 0) {\n        this.assigned0 = false;\n      }\n      this.hues.splice(i,1);\n      break;\n    }\n  }\n};"],[0,"\n\nex"]],"start1":2395,"start2":2395,"length1":29,"length2":196}]],"length":2613,"saved":false}
{"ts":1350254670692,"patch":[[{"diffs":[[-1,"/*\n * hsv <-> rbg conversion code adapted from\n * http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript\n */\n\nvar rgbToHsv = function(r, g, b){\n  r = r/255, g = g/255, b = b/255;\n  var max = Math.max(r, g, b), min = Math.min(r, g, b);\n  var h, s, v = max;\n\n  var d = max - min;\n  s = max === 0 ? 0 : d / max;\n\n  if(max == min){\n    h = 0; // achromatic\n  }else{\n    switch(max){\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n      case g: h = (b - r) / d + 2; break;\n      case b: h = (r - g) / d + 4; break;\n      }\n    h /= 6;\n  }\n\n  h = Math.round(h*360);\n  s = Math.round(s*100);\n  v = Math.round(v*100);\n  return [h, s, v];\n};\nexports.rgbToHsv = rgbToHsv;\n\nvar hsvToRgb = function(h, s, v){\n  h = h/360;\n  v = v/100;\n  s = s/100;\n  var r, g, b;\n\n  var i = Math.floor(h * 6);\n  var f = h * 6 - i;\n  var p = v * (1 - s);\n  var q = v * (1 - f * s);\n  var t = v * (1 - (1 - f) * s);\n\n  switch(i % 6){\n    case 0: r = v, g = t, b = p; break;\n    case 1: r = q, g = v, b = p; break;\n    case 2: r = p, g = v, b = t; break;\n    case 3: r = p, g = q, b = v; break;\n    case 4: r = t, g = p, b = v; break;\n    case 5: r = v, g = p, b = q; break;\n  }\n\n  r = Math.round(r*255);\n  g = Math.round(g*255);\n  b = Math.round(b*255);\n  return [r, g, b];\n};\nexports.hsvToRgb = hsvToRgb;\n\n"],[0,"var "]],"start1":0,"start2":0,"length1":1338,"length2":4}]],"length":1279,"saved":false}

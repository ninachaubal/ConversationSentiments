{"ts":1351102509085,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var colors = function() {\n  this.hues = [{'id': 'dummy', 'h': 360}];\n  this.assigned0 = false;\n};\n\n/*\nReturns an unused hue as distinct as possible from colors already being used\n*/\ncolors.prototype.getColor = function(id) {\n  if (!this.assigned0) {\n    this.hues.unshift({'id': id, 'h': 0});\n    this.assigned0 = true;\n    return 0;\n  } else {\n    var lowerPos = -1;\n    var upperPos = -1;\n    var longestRange = 0;\n    for (var i in this.hues) {\n      if (this.hues[i+1] !== undefined) {\n        var range = this.hues[i+1].h - this.hues[i].h;\n        if (range > longestRange) {\n          longestRange = range;\n          lowerPos = i;\n          upperPos = i + 1;\n        }\n      }\n    }\n    if (this.hues[lowerPos] !== undefined &&\n        this.hues[upperPos] !== undefined) {\n      var h = Math.round((this.hues[lowerPos].h + this.hues[upperPos].h) / 2);\n      this.hues.splice(lowerPos + 1,0,{'id': id, 'h': h});\n      return h\n    }\n    return undefined;\n  }\n};\n\n/*\nFrees up hues associated with the given user id\n*/\ncolors.prototype.remove = function(id) {\n  for (var i in this.hues) {\n    if (this.hues[i].id == id) {\n      if (this.hues[i].h === 0) {\n        this.assigned0 = false;\n      }\n      this.hues.splice(i,1);\n      break;\n    }\n  }\n};\n\n//============================================================================//\n\nvar col = colors();\nvar hueMap = {};\nvar videoCanvas;\nvar videoFeed;\n\ngapi.hangout.onApiReady.add(function(eventObj) {\n  gapi.hangout.onParticipantsAdded.add(function(e){\n    for (i in e.addedParticipants) {\n      hueMap[id] = col.getColor(e.addedParticipants[i].id);\n    }\n  });\n  gapi.hangout.onParticipantsRemoved.add(function(e){\n    //TODO\n  });\n  gapi.hangout.onTopicChanged.add(function(e){\n    //TODO\n  });\n\n  videoCanvas = gapi.hangout.layout.getVideoCanvas();\n  videoFeed = gapi.hangout.layout.getDefaultVideoFeed();\n  videoCanvas.setVideoFeed(videoFeed);\n  videoCanvas.setVisible(true);\n  videoCanvas.setWidth(400);\n  videoFeed.onDisplayedParticipantChanged.add(function(e){\n    //TODO\n  });\n});\n\n\n\n\n"]],"start1":0,"start2":0,"length1":0,"length2":2048}]],"length":2048}
{"contributors":[],"silentsave":false,"ts":1351102679453,"patch":[[{"diffs":[[0,"his.hues) {\n"],[1,"      console.log(i+1);\n"],[0,"      if (th"]],"start1":436,"start2":436,"length1":24,"length2":48},{"diffs":[[0,"i].id);\n"],[1,"      console.log('id = ' + e.addedParticipants[i].id + ' hue = ' + hueMap[id])\n"],[0,"    }\n  "]],"start1":1621,"start2":1621,"length1":16,"length2":96},{"diffs":[[0,"\n    //TODO\n"],[1,"    cconsole.log(e.)\n"],[0,"  });\n\n  vid"]],"start1":1838,"start2":1838,"length1":24,"length2":45}]],"length":2173,"saved":false}
{"ts":1351102708041,"patch":[[{"diffs":[[0,"e.log(e."],[-1,")"],[1,"topic);"],[0,"\n  });\n\n"]],"start1":1861,"start2":1861,"length1":17,"length2":23}]],"length":2179,"saved":false}
{"ts":1351102711491,"patch":[[{"diffs":[[0,"ODO\n    "],[-1,"c"],[0,"console."]],"start1":1846,"start2":1846,"length1":17,"length2":16}]],"length":2178,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351531246124,"patch":[[{"diffs":[[0,"oFeed;\n\n"],[1,"\n"],[0,"gapi.han"]],"start1":1423,"start2":1423,"length1":16,"length2":17}]],"length":2179,"saved":false}
{"ts":1351537953933,"patch":[[{"diffs":[[0,"eoFeed;\n"],[1,"var topicMap = {};\nvar participantMap = {};\nvar currentParticipant = '';\nvar currentParticipantTime = undefined;"],[0,"\n\ngapi.h"]],"start1":1422,"start2":1422,"length1":16,"length2":128}]],"length":2291,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351624032852,"patch":[[{"diffs":[[0,"();\n"],[-1,"var hueMap = {};\n"],[0,"var "]],"start1":1377,"start2":1377,"length1":25,"length2":8},{"diffs":[[0,"eed;"],[-1,"\nvar topicMap = {};\nvar participantMap = {};\nvar currentParticipant = '';\nvar currentParticipantTime = undefined;"],[0,"\n\nga"]],"start1":1408,"start2":1408,"length1":121,"length2":8}]],"length":2161,"saved":false}
{"ts":1351624626103,"patch":[[{"diffs":[[0,"====//\n\n"],[1,"var serverURL = 'conversationsentiments.herokuapp.com';\n"],[0,"var col "]],"start1":1353,"start2":1353,"length1":16,"length2":72},{"diffs":[[0,"     hue"],[-1,"Map[id]"],[0," = col.g"]],"start1":1609,"start2":1609,"length1":23,"length2":16},{"diffs":[[0,"i].id);\n"],[1,"\n"],[0,"      co"]],"start1":1653,"start2":1653,"length1":16,"length2":17}]],"length":2211,"saved":false}
{"ts":1351624629329,"patch":[[{"diffs":[[0,"uapp.com"],[1,"/"],[0,"';\nvar c"]],"start1":1406,"start2":1406,"length1":16,"length2":17}]],"length":2212,"saved":false}
{"ts":1351624663567,"patch":[[{"diffs":[[-1,"var colors = function() {\n  this.hues = [{'id': 'dummy', 'h': 360}];\n  this.assigned0 = false;\n};\n\n/*\nReturns an unused hue as distinct as possible from colors already being used\n*/\ncolors.prototype.getColor = function(id) {\n  if (!this.assigned0) {\n    this.hues.unshift({'id': id, 'h': 0});\n    this.assigned0 = true;\n    return 0;\n  } else {\n    var lowerPos = -1;\n    var upperPos = -1;\n    var longestRange = 0;\n    for (var i in this.hues) {\n      console.log(i+1);\n      if (this.hues[i+1] !== undefined) {\n        var range = this.hues[i+1].h - this.hues[i].h;\n        if (range > longestRange) {\n          longestRange = range;\n          lowerPos = i;\n          upperPos = i + 1;\n        }\n      }\n    }\n    if (this.hues[lowerPos] !== undefined &&\n        this.hues[upperPos] !== undefined) {\n      var h = Math.round((this.hues[lowerPos].h + this.hues[upperPos].h) / 2);\n      this.hues.splice(lowerPos + 1,0,{'id': id, 'h': h});\n      return h\n    }\n    return undefined;\n  }\n};\n\n/*\nFrees up hues associated with the given user id\n*/\ncolors.prototype.remove = function(id) {\n  for (var i in this.hues) {\n    if (this.hues[i].id == id) {\n      if (this.hues[i].h === 0) {\n        this.assigned0 = false;\n      }\n      this.hues.splice(i,1);\n      break;\n    }\n  }\n};\n\n//============================================================================//\n\n"],[0,"var "]],"start1":0,"start2":0,"length1":1365,"length2":4},{"diffs":[[0,"/';\n"],[-1,"var col = colors();\n"],[0,"var "]],"start1":53,"start2":53,"length1":28,"length2":8}]],"length":831,"saved":false}
{"ts":1351625511250,"patch":[[{"diffs":[[0,"var "],[1,"ba"],[0,"se"],[-1,"rver"],[0,"URL = '"],[1,"https://"],[0,"conv"]],"start1":0,"start2":0,"length1":21,"length2":27},{"diffs":[[0,"uapp.com"],[-1,"/"],[0,"';\nvar v"]],"start1":51,"start2":51,"length1":17,"length2":16},{"diffs":[[0,"unction(e){\n"],[1,"    users = [];\n"],[0,"    for (i i"]],"start1":184,"start2":184,"length1":24,"length2":40},{"diffs":[[0,"    "],[-1,"hue = col.getColor("],[1,"users.push({\n        id: "],[0,"e.ad"]],"start1":251,"start2":251,"length1":27,"length2":33},{"diffs":[[0,"].id"],[-1,");\n"],[1,","],[0,"\n      "],[-1,"console.log('id = ' +"],[1,"  name:"],[0," e.a"]],"start1":301,"start2":301,"length1":39,"length2":23},{"diffs":[[0,"[i]."],[-1,"id + ' hue = ' + hueMap[id])\n    }"],[1,"person.displayName\n      });\n    }\n    $.ajax({\n        type: 'POST',\n        url: baseURL + '/user',\n        data: {\n          id: e.addedParticipants[i].\n        },\n      });"],[0,"\n  }"]],"start1":340,"start2":340,"length1":42,"length2":184}]],"length":984,"saved":false}
{"ts":1351625610433,"patch":[[{"diffs":[[0,"    "],[-1,"id: e.addedParticipants[i]."],[1,"users: users"],[0,"\n   "]],"start1":468,"start2":468,"length1":35,"length2":20},{"diffs":[[0,"       }"],[-1,","],[0,"\n      }"]],"start1":486,"start2":486,"length1":17,"length2":16}]],"length":968,"saved":false}
{"ts":1351625617114,"patch":[[{"diffs":[[0,"+ '/user"],[1,"s"],[0,"',\n     "]],"start1":435,"start2":435,"length1":16,"length2":17}]],"length":969,"saved":false}
{"ts":1351626067379,"patch":[[{"diffs":[[0,": users\n"],[1,"        },\n        success: function() {\n          $.ajax({\n            url: bbaseURL + '/users',\n            success: function(data) {\n              console.log(JSON.stringify(data));\n            }\n          });\n"],[0,"        "]],"start1":478,"start2":478,"length1":16,"length2":229}]],"length":1182,"saved":false}
